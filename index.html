<!DOCTYPE html>

<html id="html" lang="en-us">
	<head>
	<meta name="generator" content="Hugo 0.139.2">
		<meta http-equiv="content-type" content="text/html;charset=utf-8">
		<meta name="viewport" content="width=device-width"/>

		<title>
			GitHub Exporter
		</title>

		<meta name="description" content="Prometheus exporter for GitHub">
		<meta name="author" content="Thomas Boerger">

		<link rel="stylesheet" href="syntax.css" />

<style type="text/css">
	body,
	div,
	dl,
	dt,
	dd,
	ul,
	ol,
	li,
	h1,
	h2,
	h3,
	h4,
	h5,
	h6,
	pre,
	form,
	fieldset,
	input,
	textarea,
	p,
	blockquote,
	th,
	td {
		margin: 0;
		padding: 0;
	}

	* {
		-webkit-box-sizing: border-box;
		-moz-box-sizing: border-box;
		box-sizing: border-box;
	}

	:before,
	:after {
		-webkit-box-sizing: border-box;
		-moz-box-sizing: border-box;
		box-sizing: border-box;
	}

	img,
	object,
	embed {
		max-width: 100%;
		height: auto;
	}

	object,
	embed {
		height: 100%;
	}

	img {
		margin: 1.25% 0;
		-ms-interpolation-mode: bicubic;
	}

	html {
		background-color: #F0F1F3;
		padding: 2%;
	}

	body {
		font-size: 16px;
		line-height: 1.6;
		font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
		color: #242424;
		max-width: 900px;
		margin: 5% auto;
	}

	body::after {
		clear: both;
		content: "";
		display: table;
	}

	header {
		margin-bottom: 8%;
	}

	footer {
		text-align: center;
	}

	h1,
	h2,
	h3,
	h4,
	h5,
	h1 a {
		color: #263A48;
		font-weight: 500;
		text-decoration: none;
	}

	h1,
	h2 {
		font-size: 36px;
		padding-bottom: 0.3em;
		margin-bottom: 0.4em;
		border-bottom: 1px solid #eee
	}

	h2 {
		font-size: 22px;
		padding-bottom: 0.6em;
		margin-bottom: 0.6em;
		margin-top: 2.5em;
	}

	h3 {
		font-size: 18px;
		margin-bottom: 0.3em;
		margin-top: 1.0em;
	}

	h1 small a {
		color: #98999C;
		font-size: 15px;
		font-weight: normal;
		float: right;
		position: absolute;
		top: 15px;
		right: 20px;
	}

	section {
		background: #fff;
		margin-bottom: 1%;
		position: relative;
		padding: 6% 8%;
	}

	blockquote {
		border-left: 3px solid #d54e21;
		font-size: 16px;
		padding: 0 0 0 20px;
		color: #d54e21;
	}

	blockquote a {
		color: #d54e21;
		font-weight: 500;
	}

	blockquote code {
		color: #d54e21;
	}

	.highlight pre {
		padding: 10px;
	}

	.highlight {
		margin-bottom: 4%;
	}

	a {
		color: #1e8cbe;
		text-decoration: underline;
	}

	a:hover {
		color: #d54e21;
	}

	ul {
		list-style: none;
	}

	ol {
		list-style: number;
	}

	ol li {
		color: #98999C;
		margin-bottom: 5px;
	}

	ol li:last-child {
		margin-bottom: 0;
	}

	p,
	ul,
	ol,
	blockquote  {
		margin-bottom: 4%;
	}

	ul ul {
		padding-top: 0;
		margin-bottom: 0;
		margin-left: 4%;
	}

	ul ul li:before {
		content: '-';
		display: inline-block;
		padding-right: 2%;
	}

	ul.col-2 {
		color: #98999C;
		-webkit-column-count: 2;
		-moz-column-count: 2;
		column-count: 2;
		-webkit-column-gap: 20px;
		-moz-column-gap: 20px;
		column-gap: 20px;
	}

	dl dt {
		font-weight: bold;
		margin-top: 10px;
	}

	dl dt:first-child {
		margin-top: 0px;
	}

	dl dd {
		padding-left: 10px;
	}

	@media screen and (min-width: 500px) {
		ul.col-2 {
			-webkit-column-count: 3;
			-moz-column-count: 3;
			column-count: 3;
			-webkit-column-gap: 20px;
			-moz-column-gap: 20px;
			column-gap: 20px;
		}
	}

	nav {
		background: #F0F1F3;
		min-width: 215px;
		margin-bottom: 5px;
		margin-top: 15px;
	}

	nav:first-of-type a {
		color: #d54e21;
		border-radius: 0;
	}

	nav:first-of-type a:hover {
		color: #d54e21;
	}

	nav:first-of-type a:before {
		background-color: #d54e21;
	}

	nav.affix {
		position: fixed;
		top: 20px;
	}

	nav.affix-bottom {
		position: absolute;
	}

	nav a {
		border-radius: 3px;
		font-size: 15px;
		display: block;
		cursor: pointer;
		font-weight: 500;
		position: relative;
		text-decoration: none;
		padding: 10px 12px;
		width: 100%;
		padding-right: 3px;
		border-bottom: 2px solid #fff;
	}

	nav a:before {
		content: '';
		width: 4px;
		display: block;
		left: 0;
		position: absolute;
		height: 100%;
		display: none;
		background: #1e8cbe;
		top: 0;
	}

	nav a:hover {
		background-color: #E6E8EA;
		color: #1e8cbe;
		text-decoration: underline;
	}

	nav a:hover:before {
		display: block;
	}

	nav a:last-of-type {
		border-bottom: none;
	}

	.gist {
		margin-top: 5.1%;
		margin-bottom: 5%;
	}

	@media screen and (max-width: 1050px) {
		body {
			margin: 0 auto;
		}
	}

	@media screen and (max-width: 767px) {
		header span {
			display: none;
		}

		h1 {
			font-size: 26px;
		}

		h2 {
			font-size: 20px;
		}
	}

	@media screen and (max-width: 514px) {
		p,
		ul,
		ol,
		blockquote  {
			margin-bottom: 8%;
		}
	}
</style>

	</head>

	<body>
		<section id="Menu">
			<header>
				<h1>
					GitHub Exporter
				</h1>

				<p>
					Prometheus exporter for GitHub
				</p>
			</header>

			<nav>
				
					<a href="#getting-started">
						Usage
					</a>
				
					<a href="#kubernetes">
						Kubernetes
					</a>
				
					<a href="#building">
						Building
					</a>
				
					<a href="#webhook">
						Webhook
					</a>
				
					<a href="#application">
						Application
					</a>
				
					<a href="#license">
						License
					</a>
				
			</nav>
		</section>

		
			<section id="getting-started">
				<h1>
					<a href="#getting-started">
						Usage
					</a>

					<small>
						<a href="#html">
							Back to Top
						</a>
					</small>
				</h1>

				<h2 id="installation">Installation</h2>
<p>We won&rsquo;t cover further details how to properly setup <a href="https://prometheus.io">Prometheus</a>
itself, we will only cover some basic setup based on <a href="https://docs.docker.com/compose/">docker-compose</a>.
But if you want to run this exporter without <a href="https://docs.docker.com/compose/">docker-compose</a> you
should be able to adopt that to your needs.</p>
<p>First of all we need to prepare a configuration for <a href="https://prometheus.io">Prometheus</a>
that includes the exporter based on a static configuration with the container
name as a hostname:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">global</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">scrape_interval</span><span class="p">:</span><span class="w"> </span><span class="l">1m</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">scrape_timeout</span><span class="p">:</span><span class="w"> </span><span class="l">10s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">evaluation_interval</span><span class="p">:</span><span class="w"> </span><span class="l">1m</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">scrape_configs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="l">github</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">static_configs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">targets</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">github_exporter:9504</span></span></span></code></pre></div>
<p>After preparing the configuration we need to create the <code>docker-compose.yml</code>
within the same folder, this <code>docker-compose.yml</code> starts a simple
<a href="https://prometheus.io">Prometheus</a> instance together with the exporter. Don&rsquo;t forget to
update the environment variables with the required credentials.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;2&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">prometheus</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">prometheus</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">prom/prometheus:latest</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">always</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="m">9090</span><span class="p">:</span><span class="m">9090</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">prometheus:/prometheus</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">./prometheus.yml:/etc/prometheus/prometheus.yml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">github_exporter</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">promhippie/github-exporter:latest</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">always</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">GITHUB_EXPORTER_TOKEN=bldyecdtysdahs76ygtbw51w3oeo6a4cvjwoitmb</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">GITHUB_EXPORTER_LOG_PRETTY=true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">GITHUB_EXPORTER_ORG=promhippie</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">GITHUB_EXPORTER_REPO=promhippie/example</span></span></span></code></pre></div>
<p>Since our <code>latest</code> tag always refers to the <code>master</code> branch of the Git
repository you should always use some fixed version. You can see all available
tags at <a href="https://hub.docker.com/r/promhippie/github-exporter/tags/">DockerHub</a> or <a href="https://quay.io/repository/promhippie/github-exporter?tab=tags">Quay</a>, there you will see that we
also provide a manifest, you can easily start the exporter on various
architectures without any change to the image name. You should apply a change
like this to the <code>docker-compose.yml</code> file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">  github_exporter:
</span></span><span class="line"><span class="cl"><span class="gd">-   image: promhippie/github-exporter:latest
</span></span></span><span class="line"><span class="cl"><span class="gd"></span><span class="gi">+   image: promhippie/github-exporter:1.0.0
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>    restart: always
</span></span><span class="line"><span class="cl">    environment:
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_TOKEN=bldyecdtysdahs76ygtbw51w3oeo6a4cvjwoitmb
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_LOG_PRETTY=true
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_ORG=promhippie
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_REPO=promhippie/example
</span></span></code></pre></div>
<p>If you want to access the exporter directly you should bind it to a local port,
otherwise only <a href="https://prometheus.io">Prometheus</a> will have access to the exporter. For
debugging purpose or just to discover all available metrics directly you can
apply this change to your <code>docker-compose.yml</code>, after that you can access it
directly at <a href="http://localhost:9504/metrics">http://localhost:9504/metrics</a>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">  github_exporter:
</span></span><span class="line"><span class="cl">    image: promhippie/github-exporter:latest
</span></span><span class="line"><span class="cl">    restart: always
</span></span><span class="line"><span class="cl"><span class="gi">+   ports:
</span></span></span><span class="line"><span class="cl"><span class="gi">+     - 127.0.0.1:9504:9504
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>    environment:
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_TOKEN=bldyecdtysdahs76ygtbw51w3oeo6a4cvjwoitmb
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_LOG_PRETTY=true
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_ORG=promhippie
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_REPO=promhippie/example
</span></span></code></pre></div>
<p>It&rsquo;s also possible to provide the token to access the GitHub API gets provided
by a file, in case you are using some kind of secret provider. For this use case
you can write the token to a file on any path and reference it with the
following format:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">  github_exporter:
</span></span><span class="line"><span class="cl">    image: promhippie/github-exporter:latest
</span></span><span class="line"><span class="cl">    restart: always
</span></span><span class="line"><span class="cl">    environment:
</span></span><span class="line"><span class="cl"><span class="gd">-     - GITHUB_EXPORTER_TOKEN=bldyecdtysdahs76ygtbw51w3oeo6a4cvjwoitmb
</span></span></span><span class="line"><span class="cl"><span class="gd"></span><span class="gi">+     - GITHUB_EXPORTER_TOKEN=file://path/to/secret/file/with/token
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>      - GITHUB_EXPORTER_LOG_PRETTY=true
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_ORG=promhippie
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_REPO=promhippie/example
</span></span></code></pre></div>
<p>Besides the <code>file://</code> format we currently also support <code>base64://</code> which expects
the token in a base64 encoded format. This functionality can be used for the
token and other secret values like the private key for GitHub App authentication
so far.</p>
<p>If you want to collect the metrics of all repositories within an organization
you are able to use globbing, but be aware that all repositories matched by
globbing won&rsquo;t provide metrics for the number of subscribers, the number of
repositories in the network, if squash merges are allowed, if rebase merges are
allowed or merge commits are allowed. These metrics are only present for
specific repositories like the example mentioned above.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">  github_exporter:
</span></span><span class="line"><span class="cl">    image: promhippie/github-exporter:latest
</span></span><span class="line"><span class="cl">    restart: always
</span></span><span class="line"><span class="cl">    environment:
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_TOKEN=bldyecdtysdahs76ygtbw51w3oeo6a4cvjwoitmb
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_LOG_PRETTY=true
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_ORG=promhippie
</span></span><span class="line"><span class="cl"><span class="gd">-     - GITHUB_EXPORTER_REPO=promhippie/example
</span></span></span><span class="line"><span class="cl"><span class="gd"></span><span class="gi">+     - GITHUB_EXPORTER_REPO=promhippie/*_exporter,promhippie/prometheus*
</span></span></span></code></pre></div>
<p>If you want to secure the access to the exporter you can provide a web config.
You just need to provide a path to the config file in order to enable the
support for it, for details about the config format look at the
<a href="#web-configuration">documentation</a> section:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">  github_exporter:
</span></span><span class="line"><span class="cl">    image: promhippie/github-exporter:latest
</span></span><span class="line"><span class="cl">    restart: always
</span></span><span class="line"><span class="cl">    environment:
</span></span><span class="line"><span class="cl"><span class="gi">+     - GITHUB_EXPORTER_WEB_CONFIG=path/to/web-config.json
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>      - GITHUB_EXPORTER_TOKEN=bldyecdtysdahs76ygtbw51w3oeo6a4cvjwoitmb
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_LOG_PRETTY=true
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_ORG=promhippie
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_REPO=promhippie/example
</span></span></code></pre></div>
<p>If you want to use the workflows exporter you are forced to expose the exporter
on the internet as the exporter got to receive webhooks from GitHub. Otherwise
you won&rsquo;t be able to receive information about the workflows which could be
transformed to metrics.</p>
<p>To enable the webhook endpoint you should prepare a random secret which gets
used by the endpoint and the GitHub webhook, it can have any format and any
length.</p>
<p>Make sure that the exporter is reachable on the <code>/github</code> endpoint and add the
following environment variables, best would be to use some kind of reverse proxy
in front of the exporter which enforces connections via HTTPS or to properly
configure HTTPS access via <a href="#web-configuration">web configuration</a>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">  github_exporter:
</span></span><span class="line"><span class="cl">    image: promhippie/github-exporter:latest
</span></span><span class="line"><span class="cl">    restart: always
</span></span><span class="line"><span class="cl">    environment:
</span></span><span class="line"><span class="cl"><span class="gi">+     - GITHUB_EXPORTER_COLLECTOR_WORKFLOWS=true
</span></span></span><span class="line"><span class="cl"><span class="gi">+     - GITHUB_EXPORTER_WEBHOOK_SECRET=your-prepared-random-secret
</span></span></span><span class="line"><span class="cl"><span class="gi"></span>      - GITHUB_EXPORTER_TOKEN=bldyecdtysdahs76ygtbw51w3oeo6a4cvjwoitmb
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_LOG_PRETTY=true
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_ORG=promhippie
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_REPO=promhippie/example
</span></span></code></pre></div>
<p>After you have enabled the workflow collector and made sure that the endpoint is
reachable by GitHub you can look at the <a href="#webhook">webhook</a> section of this
documentation to see how to configure the webhook on your GitHub organization
or repository.</p>
<p>If you want to use a GitHub application instead of a personal access token
please take a look at the <a href="#application">application</a> section and add the
following environment variables after that:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">  github_exporter:
</span></span><span class="line"><span class="cl">    image: promhippie/github-exporter:latest
</span></span><span class="line"><span class="cl">    restart: always
</span></span><span class="line"><span class="cl">    environment:
</span></span><span class="line"><span class="cl"><span class="gi">+     - GITHUB_EXPORTER_APP_ID=your-application-id
</span></span></span><span class="line"><span class="cl"><span class="gi">+     - GITHUB_EXPORTER_INSTALLATION_ID=your-installation-id
</span></span></span><span class="line"><span class="cl"><span class="gi">+     - GITHUB_EXPORTER_PRIVATE_KEY=file://path/to/secret.pem
</span></span></span><span class="line"><span class="cl"><span class="gi"></span><span class="gd">-     - GITHUB_EXPORTER_TOKEN=bldyecdtysdahs76ygtbw51w3oeo6a4cvjwoitmb
</span></span></span><span class="line"><span class="cl"><span class="gd"></span>      - GITHUB_EXPORTER_LOG_PRETTY=true
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_ORG=promhippie
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_REPO=promhippie/example
</span></span></code></pre></div>
<p>If you prefer to provide the private key as a string instead you could also
provide is in a base64 encoded format:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl">  github_exporter:
</span></span><span class="line"><span class="cl">    image: promhippie/github-exporter:latest
</span></span><span class="line"><span class="cl">    restart: always
</span></span><span class="line"><span class="cl">    environment:
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_APP_ID=your-application-id
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_INSTALLATION_ID=your-installation-id
</span></span><span class="line"><span class="cl"><span class="gi">+     - GITHUB_EXPORTER_PRIVATE_KEY=base64://Q0VSVElGSUNBVEU=
</span></span></span><span class="line"><span class="cl"><span class="gi"></span><span class="gd">-     - GITHUB_EXPORTER_PRIVATE_KEY=file://path/to/secret.pem
</span></span></span><span class="line"><span class="cl"><span class="gd"></span>      - GITHUB_EXPORTER_LOG_PRETTY=true
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_ORG=promhippie
</span></span><span class="line"><span class="cl">      - GITHUB_EXPORTER_REPO=promhippie/example
</span></span></code></pre></div>
<p>Finally the exporter should be configured fine, let&rsquo;s start this stack with
<a href="https://docs.docker.com/compose/">docker-compose</a>, you just need to execute <code>docker-compose up</code> within
the directory where you have stored the <code>prometheus.yml</code> and
<code>docker-compose.yml</code>.</p>
<p>That&rsquo;s all, the exporter should be up and running. Have fun with it and
hopefully you will gather interesting metrics and never run into issues. You can
access the exporter at
<a href="http://localhost:9504/metrics">http://localhost:9504/metrics</a> and
<a href="https://prometheus.io">Prometheus</a> at <a href="http://localhost:9090">http://localhost:9090</a>.</p>
<h2 id="configuration">Configuration</h2>
<dl>
<dt>GITHUB_EXPORTER_LOG_LEVEL</dt>
<dd>Only log messages with given severity, defaults to <code>info</code></dd>
<dt>GITHUB_EXPORTER_LOG_PRETTY</dt>
<dd>Enable pretty messages for logging, defaults to <code>false</code></dd>
<dt>GITHUB_EXPORTER_WEB_ADDRESS</dt>
<dd>Address to bind the metrics server, defaults to <code>0.0.0.0:9504</code></dd>
<dt>GITHUB_EXPORTER_WEB_PATH</dt>
<dd>Path to bind the metrics server, defaults to <code>/metrics</code></dd>
<dt>GITHUB_EXPORTER_WEB_PPROF</dt>
<dd>Enable pprof debugging for server, defaults to <code>false</code></dd>
<dt>GITHUB_EXPORTER_WEB_TIMEOUT</dt>
<dd>Server metrics endpoint timeout, defaults to <code>10s</code></dd>
<dt>GITHUB_EXPORTER_WEB_CONFIG</dt>
<dd>Path to web-config file</dd>
<dt>GITHUB_EXPORTER_WEBHOOK_PATH</dt>
<dd>Path to webhook target for GitHub, defaults to <code>/github</code></dd>
<dt>GITHUB_EXPORTER_WEBHOOK_SECRET</dt>
<dd>Secret used by GitHub to access webhook</dd>
<dt>GITHUB_EXPORTER_DATABASE_DSN</dt>
<dd>DSN for the database connection</dd>
<dt>GITHUB_EXPORTER_REQUEST_TIMEOUT</dt>
<dd>Timeout requesting GitHub API, defaults to <code>5s</code></dd>
<dt>GITHUB_EXPORTER_TOKEN</dt>
<dd>Access token for the GitHub API, also supports file:// and base64://</dd>
<dt>GITHUB_EXPORTER_APP_ID</dt>
<dd>App ID for the GitHub app, defaults to <code>0</code></dd>
<dt>GITHUB_EXPORTER_INSTALLATION_ID</dt>
<dd>Installation ID for the GitHub app, defaults to <code>0</code></dd>
<dt>GITHUB_EXPORTER_PRIVATE_KEY</dt>
<dd>Private key for the GitHub app, also supports file:// and base64://</dd>
<dt>GITHUB_EXPORTER_BASE_URL</dt>
<dd>URL to access the GitHub Enterprise API</dd>
<dt>GITHUB_EXPORTER_INSECURE</dt>
<dd>Skip TLS verification for GitHub Enterprise, defaults to <code>false</code></dd>
<dt>GITHUB_EXPORTER_ENTERPRISE, GITHUB_EXPORTER_ENTERPRISES</dt>
<dd>Enterprises to scrape metrics from, comma-separated list</dd>
<dt>GITHUB_EXPORTER_ORG, GITHUB_EXPORTER_ORGS</dt>
<dd>Organizations to scrape metrics from, comma-separated list</dd>
<dt>GITHUB_EXPORTER_REPO, GITHUB_EXPORTER_REPOS</dt>
<dd>Repositories to scrape metrics from, comma-separated list</dd>
<dt>GITHUB_EXPORTER_PER_PAGE</dt>
<dd>Number of records per page for API requests, defaults to <code>500</code></dd>
<dt>GITHUB_EXPORTER_COLLECTOR_ADMIN</dt>
<dd>Enable collector for admin stats, defaults to <code>false</code></dd>
<dt>GITHUB_EXPORTER_COLLECTOR_ORGS</dt>
<dd>Enable collector for orgs, defaults to <code>true</code></dd>
<dt>GITHUB_EXPORTER_COLLECTOR_REPOS</dt>
<dd>Enable collector for repos, defaults to <code>true</code></dd>
<dt>GITHUB_EXPORTER_COLLECTOR_BILLING</dt>
<dd>Enable collector for billing, defaults to <code>false</code></dd>
<dt>GITHUB_EXPORTER_COLLECTOR_WORKFLOW_RUNS</dt>
<dd>Enable collector for workflows, defaults to <code>false</code></dd>
<dt>GITHUB_EXPORTER_WORKFLOW_RUNS_WINDOW</dt>
<dd>History window for querying workflows, defaults to <code>24h0m0s</code></dd>
<dt>GITHUB_EXPORTER_WORKFLOW_RUNS_LABELS</dt>
<dd>List of labels used for workflows, comma-separated list, defaults to <code>owner, repo, workflow, event, name, status, branch, number, run</code></dd>
<dt>GITHUB_EXPORTER_COLLECTOR_WORKFLOW_JOBS</dt>
<dd>Enable collector for workflow jobs, defaults to <code>false</code></dd>
<dt>GITHUB_EXPORTER_WORKFLOW_JOBS_WINDOW</dt>
<dd>History window for querying workflow jobs, defaults to <code>24h0m0s</code></dd>
<dt>GITHUB_EXPORTER_WORKFLOWS_LABELS</dt>
<dd>List of labels used for workflow jobs, comma-separated list, defaults to <code>owner, repo, name, title, branch, sha, identifier, run_id, run_attempt, labels, runner_id, runner_name, runner_group_id, runner_group_name, workflow_name</code></dd>
<dt>GITHUB_EXPORTER_COLLECTOR_RUNNERS</dt>
<dd>Enable collector for runners, defaults to <code>false</code></dd>
<dt>GITHUB_EXPORTER_RUNNERS_LABELS</dt>
<dd>List of labels used for runners, comma-separated list, defaults to <code>owner, id, name, os, status</code></dd>
</dl>
<h3 id="web-configuration">Web Configuration</h3>
<p>If you want to secure the service by TLS or by some basic authentication you can
provide a <code>YAML</code> configuration file which follows the <a href="https://prometheus.io">Prometheus</a>
toolkit format. You can see a full configuration example within the
<a href="https://github.com/prometheus/exporter-toolkit/blob/master/docs/web-configuration.md">toolkit documentation</a>.</p>
<h2 id="metrics">Metrics</h2>
<p>You can a rough list of available metrics below, additionally to these metrics
you will always get the standard metrics exported by the Golang client of
<a href="https://prometheus.io">Prometheus</a>. If you want to know more about these standard metrics
take a look at the <a href="https://github.com/prometheus/client_golang/blob/master/prometheus/process_collector.go">process collector</a> and the
<a href="https://github.com/prometheus/client_golang/blob/master/prometheus/go_collector.go">Go collector</a>.</p>
<dl>
<dt>github_action_billing_included_minutes{type, name}</dt>
<dd>Included minutes for this type</dd>
<dt>github_action_billing_minutes_used{type, name}</dt>
<dd>Total action minutes used for this type</dd>
<dt>github_action_billing_minutes_used_breakdown{type, name, os}</dt>
<dd>Total action minutes used for this type broken down by operating system</dd>
<dt>github_action_billing_paid_minutes{type, name}</dt>
<dd>Total paid minutes used for this type</dd>
<dt>github_admin_comments_commit{}</dt>
<dd>Number of commit comments</dd>
<dt>github_admin_comments_gist{}</dt>
<dd>Number of gist comments</dd>
<dt>github_admin_comments_issue{}</dt>
<dd>Number of issue comments</dd>
<dt>github_admin_comments_pull_request{}</dt>
<dd>Number of pull request comments</dd>
<dt>github_admin_gists_private{}</dt>
<dd>Number of private gists</dd>
<dt>github_admin_gists_public{}</dt>
<dd>Number of public gists</dd>
<dt>github_admin_gists_total{}</dt>
<dd>Total number of gists</dd>
<dt>github_admin_hooks_active{}</dt>
<dd>Number of active hooks</dd>
<dt>github_admin_hooks_inactive{}</dt>
<dd>Number of inactive hooks</dd>
<dt>github_admin_hooks_total{}</dt>
<dd>Total number of hooks</dd>
<dt>github_admin_issues_closed{}</dt>
<dd>Number of closed issues</dd>
<dt>github_admin_issues_open{}</dt>
<dd>Number of open issues</dd>
<dt>github_admin_issues_total{}</dt>
<dd>Total number of issues</dd>
<dt>github_admin_milestones_closed{}</dt>
<dd>Number of closed milestones</dd>
<dt>github_admin_milestones_open{}</dt>
<dd>Number of open milestones</dd>
<dt>github_admin_milestones_total{}</dt>
<dd>Total number of milestones</dd>
<dt>github_admin_orgs_disabled{}</dt>
<dd>Number of disabled organizations</dd>
<dt>github_admin_orgs_members{}</dt>
<dd>Number of organization team members</dd>
<dt>github_admin_orgs_teams{}</dt>
<dd>Number of organization teams</dd>
<dt>github_admin_orgs_total{}</dt>
<dd>Total number of organizations</dd>
<dt>github_admin_pages_total{}</dt>
<dd>Total number of pages</dd>
<dt>github_admin_pulls_mergeable{}</dt>
<dd>Number of mergeable pull requests</dd>
<dt>github_admin_pulls_merged{}</dt>
<dd>Number of merged pull requests</dd>
<dt>github_admin_pulls_total{}</dt>
<dd>Total number of pull requests</dd>
<dt>github_admin_pulls_unmergeable{}</dt>
<dd>Number of unmergeable pull requests</dd>
<dt>github_admin_repos_fork{}</dt>
<dd>Number of fork repositories</dd>
<dt>github_admin_repos_org{}</dt>
<dd>Number of organization repos</dd>
<dt>github_admin_repos_pushes_total{}</dt>
<dd>Total number of pushes</dd>
<dt>github_admin_repos_root{}</dt>
<dd>Number of root repositories</dd>
<dt>github_admin_repos_total{}</dt>
<dd>Total number of repositories</dd>
<dt>github_admin_repos_wikis_total{}</dt>
<dd>Total number of wikis</dd>
<dt>github_admin_users_admin{}</dt>
<dd>Number of admin users</dd>
<dt>github_admin_users_suspended{}</dt>
<dd>Number of suspended users</dd>
<dt>github_admin_users_total{}</dt>
<dd>Total number of users</dd>
<dt>github_org_collaborators{name}</dt>
<dd>Number of collaborators within org</dd>
<dt>github_org_create_timestamp{name}</dt>
<dd>Timestamp of the creation of org</dd>
<dt>github_org_disk_usage{name}</dt>
<dd>Used diskspace by the org</dd>
<dt>github_org_filled_seats{name}</dt>
<dd>Filled seats for org</dd>
<dt>github_org_followers{name}</dt>
<dd>Number of followers for org</dd>
<dt>github_org_following{name}</dt>
<dd>Number of following other users by org</dd>
<dt>github_org_private_gists{name}</dt>
<dd>Number of private gists from org</dd>
<dt>github_org_private_repos_owned{name}</dt>
<dd>Owned private repositories by org</dd>
<dt>github_org_private_repos_total{name}</dt>
<dd>Total amount of private repositories</dd>
<dt>github_org_public_gists{name}</dt>
<dd>Number of public gists from org</dd>
<dt>github_org_public_repos{name}</dt>
<dd>Number of public repositories from org</dd>
<dt>github_org_seats{name}</dt>
<dd>Seats for org</dd>
<dt>github_org_updated_timestamp{name}</dt>
<dd>Timestamp of the last modification of org</dd>
<dt>github_package_billing_gigabytes_bandwidth_used{type, name}</dt>
<dd>Total bandwidth used by this type in Gigabytes</dd>
<dt>github_package_billing_included_gigabytes_bandwidth{type, name}</dt>
<dd>Included bandwidth for this type in Gigabytes</dd>
<dt>github_package_billing_paid_gigabytes_bandwidth_used{type, name}</dt>
<dd>Total paid bandwidth used by this type in Gigabytes</dd>
<dt>github_repo_allow_merge_commit{owner, name}</dt>
<dd>Show if this repository allows merge commits</dd>
<dt>github_repo_allow_rebase_merge{owner, name}</dt>
<dd>Show if this repository allows rebase merges</dd>
<dt>github_repo_allow_squash_merge{owner, name}</dt>
<dd>Show if this repository allows squash merges</dd>
<dt>github_repo_archived{owner, name}</dt>
<dd>Show if this repository have been archived</dd>
<dt>github_repo_created_timestamp{owner, name}</dt>
<dd>Timestamp of the creation of repo</dd>
<dt>github_repo_forked{owner, name}</dt>
<dd>Show if this repository is a forked repository</dd>
<dt>github_repo_forks{owner, name}</dt>
<dd>How often has this repository been forked</dd>
<dt>github_repo_has_downloads{owner, name}</dt>
<dd>Show if this repository got downloads enabled</dd>
<dt>github_repo_has_issues{owner, name}</dt>
<dd>Show if this repository got issues enabled</dd>
<dt>github_repo_has_pages{owner, name}</dt>
<dd>Show if this repository got pages enabled</dd>
<dt>github_repo_has_projects{owner, name}</dt>
<dd>Show if this repository got projects enabled</dd>
<dt>github_repo_has_wiki{owner, name}</dt>
<dd>Show if this repository got wiki enabled</dd>
<dt>github_repo_issues{owner, name}</dt>
<dd>Number of open issues on this repository</dd>
<dt>github_repo_network{owner, name}</dt>
<dd>Number of repositories in the network</dd>
<dt>github_repo_private{owner, name}</dt>
<dd>Show iof this repository is private</dd>
<dt>github_repo_pushed_timestamp{owner, name}</dt>
<dd>Timestamp of the last push to repo</dd>
<dt>github_repo_size{owner, name}</dt>
<dd>Size of the repository content</dd>
<dt>github_repo_stargazers{owner, name}</dt>
<dd>Number of stargazers on this repository</dd>
<dt>github_repo_subscribers{owner, name}</dt>
<dd>Number of subscribers on this repository</dd>
<dt>github_repo_updated_timestamp{owner, name}</dt>
<dd>Timestamp of the last modification of repo</dd>
<dt>github_repo_watchers{owner, name}</dt>
<dd>Number of watchers on this repository</dd>
<dt>github_request_duration_seconds{collector}</dt>
<dd>Histogram of latencies for requests to the api per collector</dd>
<dt>github_request_failures_total{collector}</dt>
<dd>Total number of failed requests to the api per collector</dd>
<dt>github_runner_enterprise_busy{owner, id, name, os, status}</dt>
<dd>1 if the runner is busy, 0 otherwise</dd>
<dt>github_runner_enterprise_online{owner, id, name, os, status}</dt>
<dd>Static metrics of runner is online or not</dd>
<dt>github_runner_org_busy{owner, id, name, os, status}</dt>
<dd>1 if the runner is busy, 0 otherwise</dd>
<dt>github_runner_org_online{owner, id, name, os, status}</dt>
<dd>Static metrics of runner is online or not</dd>
<dt>github_runner_repo_busy{owner, id, name, os, status}</dt>
<dd>1 if the runner is busy, 0 otherwise</dd>
<dt>github_runner_repo_online{owner, id, name, os, status}</dt>
<dd>Static metrics of runner is online or not</dd>
<dt>github_storage_billing_days_left_in_cycle{type, name}</dt>
<dd>Days left within this billing cycle for this type</dd>
<dt>github_storage_billing_estimated_paid_storage_for_month{type, name}</dt>
<dd>Estimated paid storage for this month for this type</dd>
<dt>github_storage_billing_estimated_storage_for_month{type, name}</dt>
<dd>Estimated total storage for this month for this type</dd>
<dt>github_workflow_job_created_timestamp{owner, repo, name, title, branch, sha, identifier, run_id, run_attempt, labels, runner_id, runner_name, runner_group_id, runner_group_name, workflow_name}</dt>
<dd>Timestamp when the workflow job have been created</dd>
<dt>github_workflow_job_duration_ms{owner, repo, name, title, branch, sha, identifier, run_id, run_attempt, labels, runner_id, runner_name, runner_group_id, runner_group_name, workflow_name}</dt>
<dd>Duration of workflow runs</dd>
<dt>github_workflow_job_duration_run_created_minutes{owner, repo, name, title, branch, sha, identifier, run_id, run_attempt, labels, runner_id, runner_name, runner_group_id, runner_group_name, workflow_name}</dt>
<dd>Duration since the workflow run creation time in minutes</dd>
<dt>github_workflow_job_started_timestamp{owner, repo, name, title, branch, sha, identifier, run_id, run_attempt, labels, runner_id, runner_name, runner_group_id, runner_group_name, workflow_name}</dt>
<dd>Timestamp when the workflow job have been started</dd>
<dt>github_workflow_job_status{owner, repo, name, title, branch, sha, identifier, run_id, run_attempt, labels, runner_id, runner_name, runner_group_id, runner_group_name, workflow_name}</dt>
<dd>Status of workflow jobs</dd>
<dt>github_workflow_run_created_timestamp{owner, repo, workflow, event, name, status, branch, number, run}</dt>
<dd>Timestamp when the workflow run have been created</dd>
<dt>github_workflow_run_duration_ms{owner, repo, workflow, event, name, status, branch, number, run}</dt>
<dd>Duration of workflow runs</dd>
<dt>github_workflow_run_duration_run_created_minutes{owner, repo, workflow, event, name, status, branch, number, run}</dt>
<dd>Duration since the workflow run creation time in minutes</dd>
<dt>github_workflow_run_started_timestamp{owner, repo, workflow, event, name, status, branch, number, run}</dt>
<dd>Timestamp when the workflow run have been started</dd>
<dt>github_workflow_run_status{owner, repo, workflow, event, name, status, branch, number, run}</dt>
<dd>Status of workflow runs</dd>
<dt>github_workflow_run_updated_timestamp{owner, repo, workflow, event, name, status, branch, number, run}</dt>
<dd>Timestamp when the workflow run have been updated</dd>
</dl>
<h2 id="labels">Labels</h2>
<p>For some collectors we have defined a dynamic option for the labeling of the
metrics. That way it&rsquo;s up to you to write high-cardinality labels to
<a href="https://prometheus.io">Prometheus</a> or not. You can see some lists below for collectors
that can be customized.</p>
<h3 id="workflow-run-labels">Workflow Run Labels</h3>
<ul>
<li>owner</li>
<li>repo</li>
<li>workflow</li>
<li>event</li>
<li>name</li>
<li>status</li>
<li>branch</li>
<li>number</li>
<li>run</li>
</ul>
<h3 id="workflow-job-labels">Workflow Job Labels</h3>
<ul>
<li>owner</li>
<li>repo</li>
<li>name</li>
<li>title</li>
<li>branch</li>
<li>sha</li>
<li>identifier</li>
<li>run_id</li>
<li>run_attempt</li>
<li>labels</li>
<li>runner_id</li>
<li>runner_name</li>
<li>runner_group_id</li>
<li>runner_group_name</li>
<li>workflow_name</li>
</ul>
<h3 id="hosted-runner-labels">Hosted Runner Labels</h3>
<ul>
<li>owner</li>
<li>id</li>
<li>name</li>
<li>os</li>
<li>status</li>
</ul>

			</section>
		
			<section id="kubernetes">
				<h1>
					<a href="#kubernetes">
						Kubernetes
					</a>

					<small>
						<a href="#html">
							Back to Top
						</a>
					</small>
				</h1>

				<h2 id="kubernetes">Kubernetes</h2>
<p>Currently we are covering the most famous installation methods on Kubernetes,
you can choose between <a href="https://github.com/kubernetes-sigs/kustomize">Kustomize</a> and <a href="https://helm.sh">Helm</a>.</p>
<h3 id="kustomize">Kustomize</h3>
<p>We won&rsquo;t cover the installation of <a href="https://github.com/kubernetes-sigs/kustomize">Kustomize</a> within this guide, to
get it installed and working please read the upstream documentation. After the
installation of <a href="https://github.com/kubernetes-sigs/kustomize">Kustomize</a> you just need to prepare a
<code>kustomization.yml</code> wherever you like similar to this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">kustomize.config.k8s.io/v1beta1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Kustomization</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">github-exporter</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">resources</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">github.com/promhippie/github_exporter//deploy/kubernetes?ref=master</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">configMapGenerator</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">github-exporter</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">behavior</span><span class="p">:</span><span class="w"> </span><span class="l">merge</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">literals</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">secretGenerator</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">github-exporter</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">behavior</span><span class="p">:</span><span class="w"> </span><span class="l">merge</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">literals</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span></span></span></code></pre></div>
<p>After that you can simply execute <code>kustomize build | kubectl apply -f -</code> to get
the manifest applied. Generally it&rsquo;s best to use fixed versions of the container
images, this can be done quite easy, you just need to append this block to your
<code>kustomization.yml</code> to use this specific version:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">images</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">quay.io/promhippie/github-exporter</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">newTag</span><span class="p">:</span><span class="w"> </span><span class="m">1.1.0</span></span></span></code></pre></div>
<p>After applying this manifest the exporter should be directly visible within your
Prometheus instance if you are using the Prometheus Operator as these manifests
are providing a ServiceMonitor.</p>
<h3 id="helm">Helm</h3>
<p>We won&rsquo;t cover the installation of <a href="https://helm.sh">Helm</a> within this guide, to get it
installed and working please read the upstream documentation. After the
installation of <a href="https://helm.sh">Helm</a> you just need to execute the following commands:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">helm repo add promhippie https://promhippie.github.io/charts
</span></span></span><span class="line"><span class="cl"><span class="go">helm show values promhippie/github-exporter
</span></span></span><span class="line"><span class="cl"><span class="go">helm install github-exporter promhippie/github-exporter
</span></span></span></code></pre></div>
<p>You can also watch that available values and generally the details of the chart
provided by us within our <a href="https://github.com/promhippie/charts/tree/master/stable/github-exporter">chart</a> repository or on <a href="https://artifacthub.io/packages/helm/promhippie/github-exporter">Artifacthub</a>.</p>
<p>After applying this manifest the exporter should be directly visible within your
Prometheus instance depending on your installation if you enabled the
annotations or the service monitor.</p>

			</section>
		
			<section id="building">
				<h1>
					<a href="#building">
						Building
					</a>

					<small>
						<a href="#html">
							Back to Top
						</a>
					</small>
				</h1>

				<p>As this project is built with Go you need to install Go first. The installation
of Go is out of the scope of this document, please follow the
<a href="https://golang.org/doc/install">official documentation</a>. After the installation of Go you need to get
the sources:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">git clone https://github.com/promhippie/github_exporter.git
</span></span><span class="line"><span class="cl">cd github_exporter/</span></span></code></pre></div>
<p>All required tool besides Go itself are bundled, all you need is part of the
<code>Makefile</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">make generate build</span></span></code></pre></div>
<p>Finally you should have the binary within the <code>bin/</code> folder now, give it a try
with <code>./bin/github_exporter -h</code> to see all available options.</p>

			</section>
		
			<section id="webhook">
				<h1>
					<a href="#webhook">
						Webhook
					</a>

					<small>
						<a href="#html">
							Back to Top
						</a>
					</small>
				</h1>

				<p>For the configuration of a webhook on your GitHub repository or your
organization you should just follow the defined steps, after that you should
receive any webhook related to the defined actions on the exporter if you have
followed the instructions from above.</p>
<p>If you want to configure a webhook for your organization just visit
<code>https://github.com/organizations/ORGANIZATION/settings/hooks/new</code> where you got
to replace <code>ORGANIZATION</code> with the name of your organization, after that follow
the steps from the screenshots.</p>
<p>If you want to configure a webhook for your repository just visit
<code>https://github.com/ORGANIZATION/REPOSITORY/settings/hooks/new</code> where you got to
replace <code>ORGANIZATION</code> with your username or organization and <code>REPOSITORY</code> with
your repository name, after that follow the steps from the screenshots.</p>
<p><strong>Payload URL</strong> should be the endpoint where GitHub can access the exporter
through your reverse proxy, or webserver, or whatever you have configured in
front of the exporter, something like <code>https://exporter.example.com/github</code>.</p>
<p><strong>Content type</strong> should be set to <code>application/json</code>, but in theory both formats
should be correctly parsed by the exporter.</p>
<p><strong>Secret</strong> gets the random password you should have prepared when you have
configured the exporter, mentioned above.</p>
<p><strong>Which events would you like to trigger this webhook</strong> got to be set to
<code>Let me select individual events</code> where you just got to check the last two items
<code>Workflow runs</code> and <code>Workflow jobs</code> (If you want to enable the workflow job collector).</p>
<p>After hitting the <strong>Add webhook</strong> button you are ready to receive first webhooks
by GitHub. It should also show that the initial test webhook have been executed
successfully.</p>

			</section>
		
			<section id="application">
				<h1>
					<a href="#application">
						Application
					</a>

					<small>
						<a href="#html">
							Back to Top
						</a>
					</small>
				</h1>

				<p>Instead of using personal access tokens you can register a GutHub App. Just head
over to <code>https://github.com/organizations/ORGANIZATION/settings/apps/new</code> where
you got to replace <code>ORGANIZATION</code> with the name of your organization.</p>
<p>Feel free to name the application howerever you like, I have named mine by the
organization and exporter, e.g. <code>Promhippie Exporter</code>. For the description you
can write whatever you want or what sounds best for you:</p>
<p><img src="./screenshots/app01.png" alt="Application 01"></p>
<p>Within the <strong>Identifying and authorizing users</strong> section I have unchecked
everything, at least for me this have worked without any problem so far:</p>
<p><img src="./screenshots/app02.png" alt="Application 02"></p>
<p>Within the <strong>Post installation</strong> and <strong>Webhook</strong> sections I have also unchecked
everything as this won&rsquo;t be used by the application:</p>
<p><img src="./screenshots/app03.png" alt="Application 03"></p>
<p>The required permissions have been stripped down to the <strong>Administration</strong>
within <strong>Repository permissions</strong> set to <code>read-only</code> and <strong>Administration</strong> as
well as <strong>Self-hosted runners</strong> within <strong>Organization permissions</strong> set to
<code>read-only</code>. You are also able to run the exporter with lesser permissions but
than you will loose part of the metrics like the runner or storage related.</p>
<p>Finally I have set the installation to <strong>Only for this account</strong> which seem to
be fine as nobody else got to install the application.</p>
<p>After the creation of the application itself you can already copy the <strong>App ID</strong>
which you will need later to configure the app within the exporter.</p>
<p>Scroll down to <strong>Private keys</strong> and hit the <strong>Generate a private key</strong> button in
order to download the required certificate which you will also need later on.</p>
<p>Since you are still missing the installation ID click on <strong>Install App</strong> on the
left sidebar and install the application for your organization, I have enabled
it far all my repositories. On the page where you are getting redirected to you
got to copy the installation ID from the URL, it&rsquo;s the last numeric part of it.
As an example for me it&rsquo;s something like
<code>https://github.com/.../installations/43103110</code> where <code>43103110</code> shows the
installation ID you need for the exporter.</p>

			</section>
		
			<section id="license">
				<h1>
					<a href="#license">
						License
					</a>

					<small>
						<a href="#html">
							Back to Top
						</a>
					</small>
				</h1>

				This project is licensed under the <a href="https://github.com/promhippie/github_exporter/blob/master/LICENSE">Apache 2.0</a> license. For the
license of the used libraries you have to check the respective sources.
			</section>
		
	</body>
</html>
